(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);n(52);var a=n(0),o=n.n(a),r=n(46),i=n.n(r),c=n(8),s=n(11),l=n.n(s),u=n(30),d=n(3),p=n(4),h=n(6),f=n(5),b=n(7),m=n(2);n(60),n(62);c.Map.displayName="Map",c.Placemark.displayName="Placemark",c.Polyline.displayName="Polyline";var g=["geocode","geoObject.addon.balloon"],v={center:[55.75,37.57],zoom:12},j=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).ymaps=null,n.state={loaded:!1},n.handleLoad=n.handleLoad.bind(Object(m.a)(Object(m.a)(n))),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.onBoundsChange(v.center)}},{key:"handleLoad",value:function(e){var t=this.props.onBoundsChange;this.map.events.add("boundschange",function(e){t(e.get("newCenter"))}),this.setState({loaded:!0})}},{key:"getPlacemark",value:function(e,t){var n=this.props.onPlacemarkDragEnd;return o.a.createElement(c.Placemark,{onDragend:function(e){var a=e.get("target").geometry.getCoordinates();n(t,{coords:a})},properties:{balloonContentBody:e.value},options:{preset:"islands#circleDotIcon",iconColor:"#FF270F",draggable:!0,hideIconOnBalloonOpen:!1},key:e.id,geometry:e.coords})}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,a=t.className,r=void 0===a?"":a,i=this.state.loaded?"":"MapContainer_status_loading";return o.a.createElement("div",{className:"\n          MapContainer\n          App-MapContainer\n          ".concat(r,"\n          ").concat(i,"\n          MapContainer_size_fluid\n          MapContainer_max-size_md\n        ")},o.a.createElement(c.Map,{className:"Map",modules:g,defaultState:v,onLoad:this.handleLoad,instanceRef:function(t){return e.map=t}},n.map(function(t,n){return e.getPlacemark(t,n)}),o.a.createElement(c.Polyline,{geometry:n.map(function(e){return e.coords}),options:{strokeColor:"#FF270F",strokeWidth:4}})))}}]),t}(a.Component),O=(n(64),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={value:""},n.handleChange=n.handleChange.bind(Object(m.a)(Object(m.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(Object(m.a)(n))),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.state.value;this.props.onSubmit(t),this.setState({value:""}),e.preventDefault()}},{key:"render",value:function(){return o.a.createElement("form",{className:"App-Form",onSubmit:this.handleSubmit},o.a.createElement("input",{className:"PointInput",type:"text",value:this.state.value,onChange:this.handleChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441..."}))}}]),t}(a.Component)),y=n(32),E=(n(66),n(20)),P=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.locations,n=e.onDelete,a=this.props,r=a.provided,i=a.innerRef,c=(r||{}).droppableProps,s=this.props.children||t.map(function(e){return o.a.createElement(w,{location:e,onDelete:n,key:e.id})});return o.a.createElement("ul",Object.assign({className:"PointList App-PointList",ref:i},c),s)}}]),t}(o.a.Component);function k(e){var t=e.onDragEnd,n=Object(y.a)(e,["onDragEnd"]);return o.a.createElement(E.a,{onDragEnd:function(e){if(e.destination){var n=e.source.index,a=e.destination.index;t(n,a)}}},o.a.createElement(E.c,{droppableId:"PointList-1"},function(e){return o.a.createElement(P,{provided:e,innerRef:e.innerRef},n.locations.map(function(e,t){return o.a.createElement(C,{id:e.id,index:t,location:e,onDelete:n.onDelete,key:e.id})}),e.placeholder)}))}var w=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.location,n=e.onDelete,a=this.props,r=a.provided,i=a.innerRef,c=r||{},s=c.draggableProps,l=c.dragHandleProps;return o.a.createElement("li",Object.assign({className:"PointList-Item Item"},s,{ref:i}),o.a.createElement("div",Object.assign({className:"Item-Icon"},l)),o.a.createElement("div",{className:"Item-Location"},t.value),o.a.createElement("button",{className:"Item-Button Item-Button_action_remove",onClick:function(){return n(t.id)}}))}}]),t}(o.a.Component);function C(e){var t=e.id,n=e.index,a=Object(y.a)(e,["id","index"]);return o.a.createElement(E.b,{draggableId:t,index:n},function(e){return o.a.createElement(w,Object.assign({provided:e,placeholder:e.placeholder,innerRef:e.innerRef},a))})}n(105);var L=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={label:""},n.handleToggle=n.handleToggle.bind(Object(m.a)(Object(m.a)(n))),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.initialLabel;this.setState(function(t){return{label:e}})}},{key:"handleToggle",value:function(){var e=this.props,t=e.onToggle,n=e.initialLabel,a=e.toggledLabel;this.setState(function(e){return{label:e.label===n?a:n}}),t()}},{key:"render",value:function(){var e=this.state.label;return o.a.createElement("button",{className:"ScreenToggler App-ScreenToggler",onClick:this.handleToggle},e)}}]),t}(o.a.Component),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)throw new Error("MisiingArgument: Expected to get an address arg, but undefined encountered");var a={id:e,coords:n,value:t};return e+=1,a}};function A(e,t){if(void 0===t.value||void 0===t.id)throw new Error("InvalidArgument: provided object does not match the location point signature");return e.concat([t])}function D(e,t,n){if(t<0||t>=e.length)throw new Error("RangeError: Trying to access element being out of the locations array range");if("object"!==typeof n)throw new Error("SignatureError: Expected to get the second argument as an object");if(n&&!Array.isArray(n.coords)&&!n.value)throw new Error("ArgumentSignatureError: Expected to get the second update arg with either address or coordinates or both, but no defined property encountered");var a=e.slice(0);return a[t]=Object.assign({},a[t],n),a}var N=["App-PointList","App-MapContainer"],I=function(e,t){return e!==t?"is-hidden":""},M=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={locations:[],activeView:N[0]},n.mapCenter=[],n.createLocationPoint=S(),n.toggleView=n.toggleView.bind(Object(m.a)(Object(m.a)(n))),n.addLocationPoint=n.addLocationPoint.bind(Object(m.a)(Object(m.a)(n))),n.deleteLocationPoint=n.deleteLocationPoint.bind(Object(m.a)(Object(m.a)(n))),n.moveLocationPoint=n.moveLocationPoint.bind(Object(m.a)(Object(m.a)(n))),n.updateLocationPoint=n.updateLocationPoint.bind(Object(m.a)(Object(m.a)(n))),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"fetch",value:function(e){return(0,this.props.ymaps.geocode)(e,{results:1})}},{key:"fetchPointCoords",value:function(e){return this.fetch(e).then(function(e){return e.geoObjects.get(0).geometry.getCoordinates()})}},{key:"fetchPointAddress",value:function(e){return this.fetch(e).then(function(e){return e.geoObjects.get(0).getAddressLine()})}},{key:"toggleView",value:function(){this.setState(function(e){return{activeView:(t=e.activeView,t===N[0]?N[1]:N[0])};var t})}},{key:"addLocationPoint",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var n,a,o=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createLocationPoint(t,this.mapCenter),a=function(e){return{locations:A(e.locations,n)}},e.abrupt("return",new Promise(function(e,t){try{o.setState(a,function(){e(n)})}catch(r){t(r)}}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteLocationPoint",value:function(e){this.setState(function(t){return{locations:function(e,t){if(void 0===t)throw new Error("MissingArgument: Expected to get a point id as the second argument, but undefined encountered");return e.filter(function(e){return e.id!==t})}(t.locations,e)}})}},{key:"moveLocationPoint",value:function(e,t){this.setState(function(n){return{locations:function(e,t,n){if(t<0||t>=e.length)throw new Error("RangeError: Trying to access the fromPosition being out of the locations array range");if(n<0||n>=e.length)throw new Error("RangeError: Trying to access the toPosition being out of the locations array range");var a=e.slice(0),o=a.splice(t,1)[0];return a.splice(n,0,o),a}(n.locations,e,t)}})}},{key:"updateLocationPoint",value:function(){var e=Object(u.a)(l.a.mark(function e(t,n){var a,o=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return{locations:D(e.locations,t,n)}},e.abrupt("return",new Promise(function(e,t){try{o.setState(a,function(){e(n)})}catch(r){t(r)}}));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.activeView;return o.a.createElement("main",{className:"App"},o.a.createElement("div",{className:" App-InnerContainer App-InnerContainer_row App-InnerContainer_fluid "},o.a.createElement("div",{className:"\n            App-Dashboard\n            ".concat(I(N[0],t),"\n          ")},o.a.createElement(O,{onSubmit:this.addLocationPoint}),o.a.createElement(k,{onDragEnd:this.moveLocationPoint,onDelete:this.deleteLocationPoint,locations:this.state.locations})),o.a.createElement(j,{onBoundsChange:function(t){e.mapCenter=t},className:I(N[1],t),locations:this.state.locations,onPlacemarkDragEnd:this.updateLocationPoint})),o.a.createElement(L,{onToggle:this.toggleView,initialLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u0443",toggledLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0447\u0435\u043a"}))}}]),t}(a.Component),x=Object(c.withYMaps)(M,!0,["geocode"]);i.a.render(o.a.createElement(c.YMaps,{query:{apikey:"262287d2-a40d-4b35-b808-7d4231cb5915"}},o.a.createElement(x,null)),document.getElementById("root"))},51:function(e,t,n){e.exports=n(107)},52:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){}},[[51,2,1]]]);
//# sourceMappingURL=main.af23dea4.chunk.js.map